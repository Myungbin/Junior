# [6주차] 연관성분석과 활용사례

### 연관성 분석

▶**목적** : 주어진 데이터에서 빈번하게 발생하는 속성(attributed value)에 대한 조건을 나타내는 연관규칙(association rule)을 발견
▶**사례** : 장바구니 분석과 트랜잭션 데이터 분석에 널리 사용

### **연관규칙의 적용사례**

▶**데이터마이닝 기법 활용** : 성공적으로 활용하려면 데이터마이닝을 필요로 하는 각 분야의 특징을 숙지하고 문제를 헤쳐 나가야 함. 데이터마이닝 자체는 목적이 아닌 이용 수단이므로 산업분야별로 데이터마이닝이 어떻게 이용할 것인지 단계별로 살펴보는 절차가 중요

### 연관 규칙

▶ **사례** : 대형마트에서의 물품구매에서 계산대 바코드를 사용하여 고객이 구
매한 물품을 신속 계산하는 과정에서 고객이 구매한 상품리스트가 해당 기업 데이터베이스에 쌓이게 됨

→ 대형마트에서는 어떤 질문을 하게 될까?
 1. 고객들은 어떤 상품을 동시에 구매하는가?
 2. A유형의 상품들을 구매한 고객은 그 다음 주로 다른 어떤 유형의 상품들을 연차적으로 구매할 것인가?

→ 데이터를 기반으로 고객의 다음 패턴과 정보를 얻을 수 있는 방법으로 연관규칙이라는 도구를 사용 (예, 한 고객이 와인을 구매한다면 고객의 15%가 치즈를 동시 구매하는 패턴)

→ **대표적 모델** : 장바구니 분석(market basket analysis)
→ **연관규칙 활용 분야** : 환자에 대한 합병증 탐색, 보험에서의 부정거래 적발, 금융에서의 불법현금융통 적발 시스템 개발 등
→ **관계된 분석도구** : 목적변수를 갖는 나무모형(tree model), 군집분석(clustering analysis) 등

### 연관 규칙의 평가 측도

• 연관규칙은 사건 또는 상품자료로부터 임의로 만들 수 있으나, 모든 연관규
칙이 유용하지는 않음. • 하여, 연관규칙이 유용한 것인지에 대한 객관적 평가 측도 필요
**▶ 지지도 (Support)**
 → 연관규칙 A → B의 지지율: 거래 중, A와 B가 동시에 포함된 거래비율
A → B의지지율 = A 와 B 를포함한거래수 / 전체거래수

 → 예, 대형할인점의 데이터베이스에 포함된 100만 거래 중에서 1만건의 
거래가 A와 B를 포함한다고 할 때에,A → B의 지지율은 1%임

 → 전체 100만 건의 거래 중에서 A가 10건 발생하고 10건 중에 7건에서 
B가 발생되었다고 하면, 연관규칙 A → B은 매우 연관성이 높은 규칙이나 전체 거래수로 볼 때에는 지지율이 0.0007%로 매우 낮다

 → 이렇듯, 지지율을 통해 평가되는 연관규칙에는 몇 가지 문제점 발생
 첫 째, 표본수가 적기 때문에 연관관계에 대한 통계적 유의성이 낮아짐
 (예, 전체 고객 중에서 A를 구매한 고객은 10명인데 10명으로 전체 고객을 유추하기에는 표본수가 너무 적다. 특히, 한 고객이 A를 여러번 구매하였다면 더욱 유의성이 떨어짐 => 이러한 연관규칙을 실제 마케팅에 활용하였다가는 투자 시간과 비용이 수익(투자대비수익, return on investment : ROI)에 도움 X

 → 지지율의 역할은, 자주 발생하지 않는 규칙을 제거하는 데에 적합

 → 연관규칙 A → B의 지지율과 연관규칙 B → A의 지지율이 같은 지지율 평가값을 갖기 때문에 두 규칙에서 어느 쪽에서 다른 하나에 영향을 주는지 알기 어려우므로 추가적인 다른 평가 측도가 필요

▶ **신뢰도 (Confidence)**
 → 원인이 발생할 때에 결과가 발생할 가능성을 나타냄
 → 연관규칙 A → B의 신뢰도는 A가 포함된 거래 중에서 B를 포함한 거래의 비율

A → B =  A 와 B를포함한거래수 / A 를포함한거래수

 → 예, 대형할인점의 전체 거래수가 100만 건에서 A를 포함한 거래가 5만 
건이고 A를 포함한 거래중에서 B를 포함한 거래가 1만 건이라면 신뢰
도는 20%가 됨
 → 연관규칙 A → B의 신뢰도는 조건부확률 P(B|A)
 → 신뢰도는 지지율에 비해 상품의 연관성을 측정하기에 더 적합한 평가측도임
 → 신뢰도가 높은 경우는 통상, 쉽게 유추 가능한 결과가 나올 수 있으므로, ‘숨어 있는’ 유용한 규칙을 찾을 수 있는 연관성 평가 측도로 필요!

**▶ 향상도 (Lift)** 
 → 신뢰도는 연관규칙이 실제 유용한지, 임의로 나타난 것인지 판단이 어려운 단점
 → 예, 연관규칙 ‘빵 -> 우유’의 신뢰도가 30%이고 전체 거래 중 30%가 우유를 포함한다면 연관규칙 ‘빵 -> 우유’는 유용하지 못한 규칙일 가능성이 높음 => 이유는, 빵을 통한 우유에 대한 마케팅이 일반적인 우유에 대한 마케팅에 비해 높은 수익을 올리지 못하기 때문!
 → 향상도는 A → B의 신뢰도를 ‘B를 포함한 거래비율’로 조건부 통제하는것으로 측도함
향상도 = A → B의 신뢰도 / B를 포함한 거래비율 = P(B|A) / P(B)

 → 향상도는 규칙을 모를 때에 비해 규칙을 알 때에 판매가 얼마나 향상되
었는지를 나타내고 있음. 
 → 향상도가 1에 가까우면 A와 B가 확률적으로 독립에 가까움을 의미
 → ‘향상도 > 1’ => A를 구매하는 경우 B를 구매할 가능성이 높음을 의미하
므로, ‘A’상품의 구매는 ‘B’상품의 구매를 갖게 하거나, 구매율을 향상시키는 연관규칙이 있다고 판단할 수 있음!